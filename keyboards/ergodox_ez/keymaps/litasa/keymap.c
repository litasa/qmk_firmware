#include QMK_KEYBOARD_H
#include "version.h"

#include "keymap_nordic.h"
#include "keymap_swedish.h"

#include "keycode/all_include.c"
#include "layer/all_include.c"
#include "tap_dance/all_include.c"
#include "user/all_include.c"

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
  [BASE] = LAYOUT_ergodox_pretty(
    KC_ESCAPE, _______,                   _______,     _______, _______,   _______, _______,          /* r1 */           _______,   _______, _______, _______, _______, _______,  _______,
    MO(NUMBER), _______,                  KC_L,        KC_DOT,  KC_P,      KC_Y,    _______,          /* r2 */           _______, KC_B,    KC_G,    KC_C,    KC_R,    KC_Z,     _______,
    KC_TAB,    KC_A,                      KC_O,        KC_E,    KC_I,      KC_U,                      /* r3 */                      KC_D,    KC_S,    KC_T,    KC_N,    KC_H,     _______,
    KC_LSHIFT, TD(APOSTHROPHE_UTILLAYER), KC_Q,        KC_J,    KC_K,      KC_X,    KC_BSPACE,        /* r4 */           KC_BSPACE,   KC_F,    KC_M,    KC_W,    KC_V,    KC_COMMA, KC_CAPSLOCK,
    KC_LCTRL,  KC_LALT,                   MO(UTILITY), _______, KC_LGUI,                              /* r5 */                               KC_LEFT, KC_DOWN, KC_UP,   KC_RIGHT, _______,
                                                                              KC_LGUI, KC_DELETE,     /* t1 */  KC_APPLICATION, TG(GAME),
                                                                                         KC_HOME,     /* t2 */  KC_PGUP,
                                                        LSFT_T(KC_SPACE), MO(SYMBOLS), KC_BSPACE,     /* t3 */  TD(MOVEMENT_LAYER_TAP_HOLD),      MO(SYMBOLS),        LCTL_T(KC_ENTER)
  ),
  [SYMBOLS] = LAYOUT_ergodox_pretty(
    _______, _______, _______,  _______, _______,  _______, _______,        /* r1 */            _______,    _______, _______, _______, _______, _______, _______,
    _______, _______, SE_LABK/*<*/ , SE_HASH/*#*/, SE_RABK/*>*/,  KC_MY_TILDE, _______,        /* r2 */            _______, _______, SE_LBRC,    TD(MINUS_UNDERSCORE), SE_RBRC,    _______, _______,
    _______, KC_MY_ARROW_RIGHT/*->*/, SE_LPRN/*(*/, KC_MY_DOUBLE_COLON, SE_RPRN/*)*/, TD(COLON_SEMICOLON),        /* r3 */                       _______, SE_LCBR, SE_EQL, SE_RCBR, _______, _______,
    _______, _______, SE_QUES/*?*/,  SE_ASTR/***/, SE_DQUO/*"*/,  _______, _______,        /* r4 */            _______,   _______, SE_AMPR, SE_EXLM, SE_PIPE, _______, _______,
    _______, _______, _______,  _______, _______,                           /* r5 */                                _______, _______, _______, _______, TO(0),
                                                        _______, _______,   /* t1 */  _______, _______,
                                                                 _______,   /* t2 */  _______,
                                               _______, _______, _______,   /* t3 */  _______, _______, _______
  ),
  [GAME] = LAYOUT_ergodox_pretty(
    RESET,   XXXXXXX, KC_1, KC_2, KC_3, KC_4, KC_5,            /* r1 */                      _______, _______, _______, _______, _______, _______, _______,
    XXXXXXX, XXXXXXX, KC_Q, KC_W,    KC_E, KC_R, KC_T,            /* r2 */                      _______, _______, _______, _______, _______, _______, _______,
    XXXXXXX, KC_LSHIFT, KC_A,    KC_S,    KC_D, KC_F,                        /* r3 */                               _______, _______, _______, _______, _______, _______,
    XXXXXXX, KC_LCTRL, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,            /* r4 */                      _______, _______, _______, _______, _______, _______, _______,
    XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,                              /* r5 */                                        _______, _______, _______, _______, TO(0),
                                                            XXXXXXX, XXXXXXX, /* t1 */ XXXXXXX, XXXXXXX,
                                                                     XXXXXXX, /* t2 */ XXXXXXX,
                                                   KC_SPACE, KC_SPACE, XXXXXXX, /* t3 */ XXXXXXX, XXXXXXX, XXXXXXX
  ),
    [UTILITY] = LAYOUT_ergodox_pretty(
    RESET,   _______, _______, _______, _______, _______, LALT(KC_F4),                  /* r1 */    _______, _______, _______, _______, _______, _______, _______,
    _______, _______, _______, _______, _______, _______, _______,                      /* r2 */    _______, _______, _______, _______, _______, _______, _______,
    _______, _______, _______, KC_ALT_SHIFT_TAB, KC_ALT_TAB, _______,                   /* r3 */             _______, _______, _______, _______, _______, _______,
    _______, _______, _______, _______, _______, TD(WINDOW_MINIMIZE_MAXIMIZE), _______, /* r4 */    _______, _______, _______, _______, _______, _______, _______,
    _______, _______, _______, _______, _______,                                        /* r5 */                      _______, _______, _______, _______, TO(0),
                                                                      _______, _______, /* t1 */ _______, _______,
                                                                               _______, /* t2 */ _______,
                                                             _______, _______, _______, /* t3 */ _______, _______, _______
  ),
    [MOVEMENT] = LAYOUT_ergodox_pretty(
    _______, _______, _______,  _______, _______,    _______,    _______,      /* r1 */         _______,      _______, _______,     _______,    _______,       _______, _______,
    _______, _______, LCTL(KC_C), KC_UP,   LCTL(KC_V), LCTL(KC_X), TG(MOVEMENT), /* r2 */         TG(MOVEMENT), _______, KC_MS_WH_UP, KC_MS_UP,   KC_MS_WH_DOWN, _______, _______,
    _______, _______, KC_LEFT,    KC_DOWN, KC_RIGHT,   _______,                  /* r3 */                       _______, KC_MS_LEFT,  KC_MS_DOWN, KC_MS_RIGHT,   _______, _______,
    _______, _______, _______,    _______, _______,    _______,    _______,      /* r4 */         _______,      _______, _______,     _______,    _______,       _______, _______,
    _______, _______, _______,    _______, _______,                              /* r5 */                                _______,     _______,    _______,       _______, TO(0),
                                                               _______, _______, /* t1 */ _______, _______,
                                                                        _______, /* t2 */ _______,
                                                   KC_LSHIFT, KC_LCTRL, _______, /* t3 */ TO(BASE), KC_MS_BTN2, KC_MS_BTN1
  ),
  [NUMBER] = LAYOUT_ergodox_pretty(
   _______, _______, _______, _______, _______, _______, _______,            /* r1 */                      _______, _______, _______, _______, _______, _______, _______,
   _______, _______, _______, _______, _______, _______, _______,            /* r2 */                      _______, _______, KC_1, KC_2, KC_3, _______, _______,
   _______, _______, _______, _______, _______, _______,                     /* r3 */                               _______, KC_4, KC_5, KC_6, KC_0, _______,
   _______, _______, _______, _______, _______, _______, _______,            /* r4 */                      _______, _______, KC_7, KC_8, KC_9, _______, _______,
   _______, _______, _______, _______, _______,                              /* r5 */                                        _______, _______, _______, _______, TO(0),
                                                           _______, _______, /* t1 */ _______, _______,
                                                                    _______, /* t2 */ _______,
                                                  _______, _______, _______, /* t3 */ _______, _______, _______
  ),
  //[2] = LAYOUT_ergodox_pretty(
  //  RESET,   _______, _______, _______, _______, _______, _______,            /* r1 */                      _______, _______, _______, _______, _______, _______, _______,
  //  _______, _______, _______, _______, _______, _______, _______,            /* r2 */                      _______, _______, _______, _______, _______, _______, _______,
  //  _______, _______, _______, _______, _______, _______,                     /* r3 */                               _______, _______, _______, _______, _______, _______,
  //  _______, _______, _______, _______, _______, _______, _______,            /* r4 */                      _______, _______, _______, _______, _______, _______, _______,
  //  _______, _______, _______, _______, _______,                              /* r5 */                                        _______, _______, _______, _______, TO(0),
  //                                                          _______, _______, /* t1 */ _______, _______,
  //                                                                   _______, /* t2 */ _______,
  //                                                 _______, _______, _______, /* t3 */ _______, _______, _______
  //),
};

bool process_record_user(uint16_t keycode, keyrecord_t *record) {

    process_alt_tab_or_alt_shift_tab(keycode, record);
    process_right_arrow_keycode(keycode, record);
    process_double_colon_keycode(keycode, record);
    process_tilde_keycode(keycode, record);
    return true;
}
